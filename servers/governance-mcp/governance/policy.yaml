azure:
  # =========================
  # Resource Groups
  # =========================
  create_resource_group:
    deny_names: [cookies, foo, bar]
    name_regex: "^(rg-[a-z0-9-]{3,40})$"
    allowed_regions: [usgovvirginia, usgovarizona]
    require_tags: [owner, env]
    suggest_name: "rg-{{alias}}-sandbox"
    suggest_tags:
      owner: "{{upn}}"
      env: "dev"
    suggest_region: "usgovvirginia"

  # =========================
  # App Service Plan
  # =========================
  create_app_service_plan:
    sku_allowlist: [P1v3, P2v3]

  # =========================
  # Web App (App Service)
  # =========================
  create_web_app:
    runtime_allowlist:
      - "NODE|20-lts"
      - "DOTNET|8.0"

  # =========================
  # Static Web App (SWA)
  # =========================
  create_static_web_app:
    name_regex: "^[a-z0-9-]{2,60}$"
    allowed_regions: [usgovvirginia, usgovarizona]
    sku_allowlist: [Free, Standard, StandardPlus]
    suggest_name: "swa-{{alias}}"
    suggest_region: "usgovvirginia"

  # Link an SWA to a GitHub repo/branch (CI/CD)
  link_static_webapp_repo:
    repo_regex: "^[a-z0-9_.-]+$"
    branch_regex: "^(main|release/.+)$"
    app_location_regex: "^(/|/app|/src|/web)$"
    output_location_regex: "^(/dist|/build|/out)$"

  # =========================
  # Virtual Network
  # =========================
  create_virtual_network:
    name_regex: "^[a-zA-Z0-9_-]{2,64}$"
    allowed_regions: [usgovvirginia, usgovarizona]
    # engine can check addressPrefixes[0] via path "addressPrefixes.0"
    vnet_first_prefix_regex: '^10\.(?:[0-9]|[1-9][0-9])\.0\.0/16$'

  # =========================
  # Subnet
  # =========================
  create_subnet:
    name_regex: "^[a-zA-Z0-9_-]{1,80}$"
    address_prefix_regex: '^10\.(?:[0-9]|[1-9][0-9])\.(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.0/24$'
    privateEndpointNetworkPolicies_allowlist: ["Enabled", "Disabled"]

  # =========================
  # Private Endpoint
  # =========================
  create_private_endpoint:
    name_regex: "^[a-zA-Z0-9_-]{2,80}$"
    allowed_regions: [usgovvirginia, usgovarizona]
    target_resource_id_regex: '^/subscriptions/[^/]+/resourceGroups/[^/]+/providers/(Microsoft\.KeyVault|Microsoft\.Storage|Microsoft\.Web)/'
    group_ids_allowlist: ["vault", "blob", "web"]

  # =========================
  # AKS (Managed Kubernetes)
  # =========================
  # Map fields to your tool args, e.g.:
  #   name -> args.name
  #   location -> args.location
  #   kubernetesVersion -> args.kubernetesVersion
  #   agentPool.vmSize -> args.agentPool.vmSize
  #   agentPool.enableAutoScaling -> args.agentPool.enableAutoScaling
  #   networkPlugin -> args.networkPlugin
  #   apiServerAccessProfile.enablePrivateCluster -> args.apiServerAccessProfile.enablePrivateCluster
  create_aks_cluster:
    name_regex: "^(aks-[a-z0-9-]{3,40})$"
    allowed_regions: [usgovvirginia, usgovarizona]
    kubernetes_version_regex: "^1\\.(27|28|29)(\\.\\d+)?$"
    agentpool_vmSize_allowlist:
      - "Standard_D4s_v5"
      - "Standard_D8s_v5"
    agentpool_enableAutoScaling_allowlist: ["true"]
    # If you expose node count (number), prefer validating via your tool; or stringify and match:
    agentpool_count_regex: "^(3|4|5|6|7|8)$"
    networkPlugin_allowlist: ["azure"]
    networkPolicy_allowlist: ["azure"]
    outboundType_allowlist: ["loadBalancer", "userDefinedRouting"]
    apiServer_privateCluster_allowlist: ["true"]

github:
  # =========================
  # Create repository (org)
  # =========================
  create_repo:
    name_regex: "^[a-z0-9-]{3,100}$"
    org_allowlist: ["pedemoorg", "your-org"]
    private_allowlist: ["true"]        # allowedValues on path "private"
    default_branch_allowlist: ["main"] # if you pass default_branch in args
    suggest_name: "mission-{{alias}}-infra"

  # =========================
  # Create repo from template
  # =========================
  create_repo_from_template:
    name_regex: "^[a-z0-9-]{3,100}$"
    template_owner_allowlist: ["pedemoorg", "your-org"]
    private_allowlist: ["true"]

  # =========================
  # Team permission on repo
  # =========================
  assign_team_permission:
    permission_allowlist: ["push", "maintain"]

  # =========================
  # Branch protection
  # =========================
  protect_default_branch:
    branch_allowlist: ["main"]
    require_pr_reviews_allowlist: ["true"]
    approvals_allowlist: ["1", "2"]
    enforce_admins_allowlist: ["true"]

  # =========================
  # Labels
  # =========================
  create_label:
    name_regex: "^[a-z0-9_.-]{1,50}$"
    color_regex: "^[0-9a-fA-F]{6}$"
